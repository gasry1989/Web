:root {
  --color-bg:#0d1216;
  --color-panel:#1c252c;
  --color-border:#2e3a44;
  --color-primary:#0b84d8;
  --color-primary-hover:#1299f8;
  --color-danger:#d64f4f;
  --color-text:#eef3f5;
  --color-text-dim:#95a2ad;
  --color-green:#21c98f;
  --color-yellow:#ffb347;
  --color-red:#ff5252;
  --radius:6px;
  --transition: .18s cubic-bezier(.4,0,.2,1);
  font-size:14px;
}
* { box-sizing:border-box; }
body {
  margin:0;
  background:var(--color-bg);
  font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  color:var(--color-text);
  -webkit-font-smoothing:antialiased;
}
h1,h2,h3,h4 { margin:0; font-weight:600; }
a { color:var(--color-primary); text-decoration:none; }
a:hover { color:var(--color-primary-hover); }
.btn {
  background:#24313a;
  color:#fff;
  border:1px solid var(--color-border);
  padding:6px 14px;
  border-radius:var(--radius);
  cursor:pointer;
  font-size:13px;
  line-height:1.2;
  display:inline-flex;
  align-items:center;
  gap:4px;
  transition:var(--transition);
}
.btn:hover { background:#2f3e48; }
.btn-primary { background:var(--color-primary); border-color:var(--color-primary); }
.btn-primary:hover { background:var(--color-primary-hover); }
.btn-danger { background:var(--color-danger); border-color:var(--color-danger); }
.btn-xs { padding:4px 8px; font-size:12px; }
.btn-sm { padding:4px 10px; font-size:12px; }

input,select,textarea {
  background:#121a21;
  color:#e2e9ec;
  border:1px solid var(--color-border);
  border-radius:4px;
  padding:6px 8px;
  font:inherit;
  outline:none;
}
input:focus,select:focus,textarea:focus {
  border-color:var(--color-primary);
  box-shadow:0 0 0 2px rgba(18,153,248,.3);
}

.app-header {
  height:48px;
  background:#182026;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 16px;
  border-bottom:1px solid #28323a;
}
.app-header__brand { font-weight:600; font-size:16px; }
.app-header__right { display:flex; align-items:center; gap:12px; }

.app-root {
  display:flex;
  min-height:calc(100vh - 48px);
}

.sidebar {
  width:200px;
  background:#12181d;
  border-right:1px solid var(--color-border);
  display:flex;
  flex-direction:column;
  position:relative;
  transition:var(--transition);
}
.sidebar.collapsed { width:44px; }
.sidebar__toggle {
  position:absolute;
  top:4px;
  right:-12px;
  background:#12181d;
  width:24px;
  height:24px;
  font-size:12px;
  line-height:24px;
  text-align:center;
  border:1px solid var(--color-border);
  border-radius:4px;
  cursor:pointer;
  user-select:none;
}
.sidebar__nav { padding:48px 0 8px; flex:1; overflow:auto; }
.sidebar__nav ul { list-style:none; padding:0; margin:0; }
.sidebar__nav li { }
.sidebar__nav a {
  display:block;
  padding:10px 16px;
  color:var(--color-text-dim);
  font-size:13px;
  transition:var(--transition);
}
.sidebar__nav a.active, .sidebar__nav a:hover {
  background:#1f2a32;
  color:var(--color-text);
}

.main-view { flex:1; padding:16px; overflow:auto; }

.page-title-bar { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.table-wrapper { background:#151d23; border:1px solid var(--color-border); border-radius:8px; overflow:auto; }

.data-table { width:100%; border-collapse:collapse; font-size:12px; }
.data-table thead { background:#1f2a32; }
.data-table th, .data-table td {
  padding:6px 8px;
  border-bottom:1px solid #223038;
  text-align:left;
  white-space:nowrap;
}
.data-table tbody tr:hover { background:#1b262e; }

.dot { display:inline-block; width:10px; height:10px; border-radius:50%; }
.dot-green { background:var(--color-green); }
.dot-gray { background:#666; }

.pagination { margin:10px 0; display:flex; gap:4px; flex-wrap:wrap; }
.pg-btn {
  background:#25323b;
  border:1px solid var(--color-border);
  color:#ddd;
  cursor:pointer;
  padding:4px 8px;
  border-radius:4px;
  font-size:12px;
}
.pg-btn.active, .pg-btn:hover { background:var(--color-primary); border-color:var(--color-primary); }

.toast-root {
  position:fixed;
  top:10px;
  right:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:9999;
  pointer-events:none;
}
.toast {
  background:#24313a;
  border:1px solid var(--color-border);
  padding:8px 12px;
  border-radius:4px;
  font-size:12px;
  opacity:0;
  transform:translateY(-6px);
  transition:.25s;
  pointer-events:auto;
}
.toast.show { opacity:1; transform:translateY(0); }
.toast-success { border-color:var(--color-green); }
.toast-error { border-color:var(--color-danger); }
.toast-info { border-color:var(--color-primary); }

.preview-bar {
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  background:#10161b;
  border-top:1px solid var(--color-border);
  padding:6px 10px;
  z-index:500;
  overflow:hidden;
}
.preview-bar.hidden { display:none; }
.preview-bar__inner {
  display:flex;
  gap:8px;
  align-items:stretch;
  overflow-x:auto;
}
.preview-win {
  background:#1b252c;
  border:1px solid #2e3a44;
  border-radius:6px;
  width:190px;
  flex:0 0 auto;
  display:flex;
  flex-direction:column;
  user-select:none;
}
.preview-win.dragging {
  opacity:.5;
}
.pw-head {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:4px 6px;
  font-size:12px;
  background:#212d35;
  border-bottom:1px solid #2e3a44;
}
.pw-title { flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.close-btn {
  background:none;
  border:none;
  color:#999;
  cursor:pointer;
  font-size:14px;
  line-height:1;
}
.close-btn:hover { color:#fff; }
.pw-body {
  flex:1;
  padding:6px;
  font-size:11px;
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.video-placeholder {
  background:#0f151a;
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  border:1px dashed #2e3a44;
  color:#8aa0ad;
  font-size:12px;
}
.video-placeholder.status { color:#c3d4dd; }
.mode-metrics .metric-line { line-height:1.3; }
.battery-red { color:var(--color-red); }
.battery-yellow { color:var(--color-yellow); }
.tag { display:inline-block; padding:2px 6px; font-size:11px; border-radius:3px; }
.tag-green { background:var(--color-green); color:#05221a; }
.tag-gray { background:#777; color:#111; }
.battery-badge { font-size:11px; margin-left:6px; color:#81d2ff; }

.map-container { width:100%; height:600px; background:#0c1216; border:1px solid var(--color-border); }

.site-layout {
  display:grid;
  grid-template-columns:240px 1fr 300px;
  gap:12px;
}

.site-left {
  display:flex;
  flex-direction:column;
  gap:10px;
}

.filters { background:#151d23; border:1px solid var(--color-border); padding:8px; border-radius:6px; font-size:12px; display:grid; gap:6px; }
.filters label { display:flex; align-items:center; gap:6px; font-weight:500; }
.filters input, .filters select { flex:1; }

.device-tree {
  background:#151d23;
  border:1px solid var(--color-border);
  border-radius:6px;
  padding:6px 8px;
  font-size:12px;
  overflow:auto;
  max-height:calc(100vh - 260px);
}
.tree-title { font-weight:600; margin:6px 0; }
.tree-device {
  padding:4px 4px;
  cursor:pointer;
  border-radius:4px;
  display:flex;
  align-items:center;
  gap:6px;
}
.tree-device:hover {
  background:#1f2a32;
}
.tree-user { margin-bottom:8px; }
.tree-user-title { font-weight:600; margin-bottom:4px; color:var(--color-text-dim); }
.tree-devices { display:flex; flex-direction:column; gap:2px; }

.site-center { position:relative; }
.site-right { display:flex; flex-direction:column; gap:12px; }

.summary-panel, .notify-panel {
  background:#151d23;
  border:1px solid var(--color-border);
  border-radius:6px;
  padding:6px 10px;
  font-size:12px;
  height: 280px;
  display:flex;
  flex-direction:column;
}
.summary-panel h3, .notify-panel h3 { margin:4px 0 6px; font-size:13px; }
.summary-item { margin-bottom:6px; }
.summary-label { font-size:12px; margin-bottom:2px; }
.summary-bars { display:flex; width:100%; height:16px; font-size:10px; line-height:16px; }
.bar-online { background:var(--color-green); color:#093826; text-align:center; }
.bar-offline { background:#2e3a44; color:#a9bac3; text-align:center; }

.notify-list { overflow:auto; flex:1; }
.notify-item { padding:4px; border-bottom:1px solid #202c34; }

.overlay-card {
  position:absolute;
  top:80px;
  left:50%;
  transform:translateX(-50%);
  background:#1b252c;
  border:1px solid var(--color-border);
  border-radius:6px;
  width:420px;
  padding:10px 14px 14px;
  z-index:300;
  box-shadow:0 6px 24px -6px rgba(0,0,0,.5);
  font-size:12px;
}
.overlay-card__close {
  position:absolute;
  top:4px;
  right:6px;
  cursor:pointer;
  font-size:16px;
  color:#999;
}
.overlay-card__close:hover { color:#fff; }
.ov-section { margin:6px 0 8px; }
.ov-section label { font-weight:600; display:inline-flex; align-items:center; gap:4px; }
.ov-actions { display:flex; gap:8px; }

.login-page { max-width:360px; margin:60px auto; background:#151d23; padding:24px 26px; border:1px solid var(--color-border); border-radius:8px; }
.login-page h2 { margin:0 0 20px; font-size:20px; }
.form-vertical label { display:flex; flex-direction:column; font-size:12px; gap:4px; margin-bottom:10px; }

.modal-backdrop {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:60px 20px 40px;
  z-index:1000;
  overflow:auto;
}
.modal-container {
  background:#1c252c;
  border:1px solid var(--color-border);
  border-radius:8px;
  max-width:90%;
  max-height:100%;
  overflow:hidden;
  position:relative;
  display:flex;
  flex-direction:column;
  animation:fadeIn .25s;
}
.modal-scroll {
  overflow:auto;
  padding:18px 20px 28px;
  font-size:13px;
}
.modal-actions {
  display:flex;
  gap:12px;
  justify-content:flex-end;
  margin-top:12px;
}

.role-matrix { font-size:12px; }
.matrix-scroll { max-height:400px; overflow:auto; background:#151d23; padding:8px; border:1px solid var(--color-border); border-radius:6px; }
.matrix-table { width:100%; border-collapse:collapse; }
.matrix-table th, .matrix-table td {
  border-bottom:1px solid #2e3a44;
  padding:4px 6px;
  text-align:center;
  white-space:nowrap;
}
.matrix-table thead th { background:#202c34; }
.matrix-actions { text-align:right; margin-top:10px; }

@keyframes fadeIn {
  from { opacity:0; transform:translateY(10px); }
  to { opacity:1; transform:translateY(0); }
}

/* 响应：最小 1024x768；不用特殊小屏处理，仅保证缩放 */
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<title>SRS WebRTC 播放器（全屏防闪烁 + 小窗保持比例 + 全屏退出自动回归）</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/rtc-player.css">
<script src="js/jquery-1.12.2.min.js"></script>
<script src="js/adapter-7.4.0.min.js"></script>
<script src="js/srs.sdk.js"></script>
<script src="js/winlin.utility.js"></script>
<script src="js/srs.page.js"></script>
</head>
<body>
<div class="page-wrap">
    <h3>WebRTC 播放器（全屏防闪烁 + 自动收回小窗）</h3>
    <input id="txt_url" type="hidden" value="">
    <div class="stream-inputs">
        <div class="stream-box">
            <label for="url_main">主流URL</label>
            <input id="url_main" placeholder="主流播放地址">
            <button id="btn_start_main">播放主流</button>
        </div>
        <div class="stream-box">
            <label for="url_sub">副流URL</label>
            <input id="url_sub" placeholder="副流播放地址">
            <button id="btn_start_sub">播放副流</button>
        </div>
    </div>

    <div id="video_container">
        <div id="info_panel"></div>
        <div class="slot main" id="slot_main"></div>
        <div class="slot pip" id="slot_pip" style="display:none;">
            <div id="pip_placeholder">副流小窗</div>
        </div>
        <div class="controls-overlay" id="controls_overlay">
            <div class="left-controls">
                <div class="volume-group">
                    <button class="ctrl-btn" id="btn_mute" data-tip="音量/静音">
                        <svg id="icon_volume" viewBox="0 0 24 24"><path d="M3 10v4h4l5 5V5L7 10H3zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03z"/></svg>
                        <svg id="icon_volume_off" viewBox="0 0 24 24" style="display:none"><path d="M16.5 12c0 1.77-1.02 3.29-2.5 4.03V7.97c1.48.74 2.5 2.26 2.5 4.03zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.26c-.67.52-1.42.93-2.25 1.17v2.07c1.38-.32 2.63-.99 3.68-1.92L19.73 21 21 19.73 4.27 3zM14 3.23v2.06c2.89.86 5 3.54 5 6.71 0 1.05-.25 2.05-.69 2.94l1.53 1.53A9.822 9.822 0 0 0 21 12c0-4.17-2.89-7.85-7-8.77z"/></svg>
                    </button>
                    <div class="volume-slider"><input id="volume_slider" type="range" min="0" max="1" step="0.01" value="1"></div>
                </div>
            </div>
            <div class="right-controls">
                <button class="ctrl-btn" id="btn_switch" data-tip="切换主/副画面" style="display:none;">
                    <svg viewBox="0 0 24 24"><path d="M4 18h7v-2H6V6H4v12zm16-2V4H11v12h9zm0 2h-9v2h11V6h-2v12z"/></svg>
                </button>
                <button class="ctrl-btn" id="btn_info" data-tip="信息">
                    <svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
                </button>
                <button class="ctrl-btn" id="btn_rotate" data-tip="旋转90°">
                    <svg viewBox="0 0 24 24"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26l1.46-1.46A5.97 5.97 0 0 1 6 12c0-3.31 2.69-6 6-6zm6.76 1.74-1.46 1.46c.47.89.7 1.9.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"/></svg>
                </button>
                <button class="ctrl-btn" id="btn_fit_fill" data-tip="自适应/填充">
                    <svg id="icon_fit" viewBox="0 0 24 24"><path d="M4 4h7v2H6v5H4V4zm16 0v7h-2V6h-5V4h7zm0 16h-7v-2h5v-5h2v7zM4 20v-7h2v5h5v2H4z"/></svg>
                    <svg id="icon_fill" viewBox="0 0 24 24" style="display:none"><path d="M7 7h10v10H7z"/><path d="M5 5v14h14V5H5zm12 12H7V7h10v10z"/></svg>
                </button>
                <button class="ctrl-btn" id="btn_fullscreen" data-tip="全屏">
                    <svg id="icon_fullscreen" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zm-3-12v2h3v3h2V5h-5z"/></svg>
                    <svg id="icon_fullscreen_exit" viewBox="0 0 24 24" style="display:none"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>
                </button>
            </div>
        </div>
    </div>
</div>

<script src="js/rtc-player.js"></script>
</body>
</html>